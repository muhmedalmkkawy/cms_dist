import{L as ve,s as ye,br as Ae,f as Fe,bs as je,E as oe,aE as te,bg as ne,bt as Ie,ad as Te,bu as de,i as Se,j as Re,Z as _e,C as Ee,aj as Be,bv as Ve,c as Ge,o as De,y as Me,h as pe}from"./CDCwti5A.js";function C(r){"@babel/helpers - typeof";return C=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(r)}function be(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function ae(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?be(Object(t),!0).forEach(function(n){Pe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):be(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Pe(r,e,t){return(e=Ce(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Ce(r){var e=Ne(r,"string");return C(e)=="symbol"?e:e+""}function Ne(r,e){if(C(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(C(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function I(){var r,e,t=typeof Symbol=="function"?Symbol:{},n=t.iterator||"@@iterator",i=t.toStringTag||"@@toStringTag";function f(O,E,V,W){var q=E&&E.prototype instanceof p?E:p,K=Object.create(q.prototype);return F(K,"_invoke",(function(w,a,u){var l,o,s,m=0,$=u||[],c=!1,y={p:0,n:0,v:r,a:R,f:R.bind(r,4),d:function(_,k){return l=_,o=0,s=r,y.n=k,v}};function R(h,_){for(o=h,s=_,e=0;!c&&m&&!k&&e<$.length;e++){var k,S=$[e],B=y.p,A=S[2];h>3?(k=A===_)&&(s=S[(o=S[4])?5:(o=3,3)],S[4]=S[5]=r):S[0]<=B&&((k=h<2&&B<S[1])?(o=0,y.v=_,y.n=S[1]):B<A&&(k=h<3||S[0]>_||_>A)&&(S[4]=h,S[5]=_,y.n=A,o=0))}if(k||h>1)return v;throw c=!0,_}return function(h,_,k){if(m>1)throw TypeError("Generator is already running");for(c&&_===1&&R(_,k),o=_,s=k;(e=o<2?r:s)||!c;){l||(o?o<3?(o>1&&(y.n=-1),R(o,s)):y.n=s:y.v=s);try{if(m=2,l){if(o||(h="next"),e=l[h]){if(!(e=e.call(l,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,o<2&&(o=0)}else o===1&&(e=l.return)&&e.call(l),o<2&&(s=TypeError("The iterator does not provide a '"+h+"' method"),o=1);l=r}else if((e=(c=y.n<0)?s:w.call(a,y))!==v)break}catch(S){l=r,o=1,s=S}finally{m=1}}return{value:e,done:c}}})(O,V,W),!0),K}var v={};function p(){}function d(){}function b(){}e=Object.getPrototypeOf;var g=[][n]?e(e([][n]())):(F(e={},n,function(){return this}),e),j=b.prototype=p.prototype=Object.create(g);function T(O){return Object.setPrototypeOf?Object.setPrototypeOf(O,b):(O.__proto__=b,F(O,i,"GeneratorFunction")),O.prototype=Object.create(j),O}return d.prototype=b,F(j,"constructor",b),F(b,"constructor",d),d.displayName="GeneratorFunction",F(b,i,"GeneratorFunction"),F(j),F(j,i,"Generator"),F(j,n,function(){return this}),F(j,"toString",function(){return"[object Generator]"}),(I=function(){return{w:f,m:T}})()}function F(r,e,t,n){var i=Object.defineProperty;try{i({},"",{})}catch{i=0}F=function(v,p,d,b){function g(j,T){F(v,j,function(O){return this._invoke(j,T,O)})}p?i?i(v,p,{value:d,enumerable:!b,configurable:!b,writable:!b}):v[p]=d:(g("next",0),g("throw",1),g("return",2))},F(r,e,t,n)}function me(r,e,t,n,i,f,v){try{var p=r[f](v),d=p.value}catch(b){return void t(b)}p.done?e(d):Promise.resolve(d).then(n,i)}function M(r){return function(){var e=this,t=arguments;return new Promise(function(n,i){var f=r.apply(e,t);function v(d){me(f,n,i,v,p,"next",d)}function p(d){me(f,n,i,v,p,"throw",d)}v(void 0)})}}function ie(r,e){return He(r)||Ue(r,e)||Le(r,e)||Ke()}function Ke(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Le(r,e){if(r){if(typeof r=="string")return he(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?he(r,e):void 0}}function he(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function Ue(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n,i,f,v,p=[],d=!0,b=!1;try{if(f=(t=t.call(r)).next,e!==0)for(;!(d=(n=f.call(t)).done)&&(p.push(n.value),p.length!==e);d=!0);}catch(g){b=!0,i=g}finally{try{if(!d&&t.return!=null&&(v=t.return(),Object(v)!==v))return}finally{if(b)throw i}}return p}}function He(r){if(Array.isArray(r))return r}function We(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;Ae()?Fe(r):e?r():je(r)}function qe(r,e,t){var n=Se(!0),i=Re(r,function(f,v){n.value&&e(f,v)},t);return{stop:i,pause:function(){n.value=!1},resume:function(){n.value=!0}}}function ue(r){return Object.entries(r).reduce(function(e,t){var n=ie(t,2),i=n[0],f=n[1];return i.split(/[\.\[\]]+/).filter(Boolean).reduce(function(v,p,d,b){var g;return(g=v[p])!==null&&g!==void 0?g:v[p]=isNaN(b[d+1])?d===b.length-1?f:{}:[]},e),e},{})}function ge(r,e){if(!r||!e)return null;try{var t=r[e];if(_e(t))return t}catch{}var n=e.split(/[\.\[\]]+/).filter(Boolean);return n.reduce(function(i,f){return i&&i[f]!==void 0?i[f]:void 0},r)}var Qe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=ve({}),n=ve({}),i=ye(function(){return Object.values(t).every(function(w){return!w.invalid})}),f=ye(function(){return ue(t)}),v=function(a,u){return{value:u??ge(e.initialValues,a),touched:!1,dirty:!1,pristine:!0,valid:!0,invalid:!1,error:null,errors:[]}},p=function(a,u){var l=te(u,a);return l===!0||ne(l)&&l.includes(a)},d=(function(){var w=M(I().m(function a(u,l){var o,s,m,$,c;return I().w(function(y){for(;;)switch(y.n){case 0:if(s={},!ne(e[u])){y.n=2;break}return y.n=1,O(e[u]);case 1:s=y.v,y.n=4;break;case 2:if($=(o=e[u])!==null&&o!==void 0?o:l,!$){y.n=4;break}return y.n=3,O();case 3:s=y.v;case 4:if(m=Object.keys(n).filter(function(R){var h;return(h=n[R])===null||h===void 0||(h=h.options)===null||h===void 0?void 0:h[u]})||[],c=_e(m),!c){y.n=6;break}return y.n=5,O(m);case 5:s=y.v;case 6:return y.a(2,s)}},a)}));return function(u,l){return w.apply(this,arguments)}})(),b=function(a,u,l,o){var s,m;((s=u?.[l])!==null&&s!==void 0?s:p(a,(m=e[l])!==null&&m!==void 0?m:o))&&O(a)},g=function(a,u){var l,o;if(!a)return[];(l=n[a])===null||l===void 0||l._watcher.stop(),t[a]||(t[a]=v(a,u?.initialValue));var s=oe((o=te(u,t[a]))===null||o===void 0?void 0:o.props,te(u?.props,t[a]),{name:a,onBlur:function(){t[a].touched=!0,b(a,u,"validateOnBlur")},onInput:function(c){t[a].value=c&&Object.hasOwn(c,"value")?c.value:c.target.value},onChange:function(c){t[a].value=c&&Object.hasOwn(c,"value")?c.value:c.target.type==="checkbox"||c.target.type==="radio"?c.target.checked:c.target.value},onInvalid:function(c){var y;t[a].invalid=!0,t[a].errors=c,t[a].error=(y=c?.[0])!==null&&y!==void 0?y:null}}),m=qe(function(){return t[a].value},function($,c){t[a].pristine&&(t[a].pristine=!1),$!==c&&(t[a].dirty=!0),b(a,u,"validateOnValueUpdate",!0)});return n[a]={props:s,states:t[a],options:u,_watcher:m},[t[a],s]},j=function(a){return(function(){var u=M(I().m(function l(o){var s;return I().w(function(m){for(;;)switch(m.n){case 0:return m.n=1,d("validateOnSubmit",!0);case 1:return s=m.v,m.a(2,a(ae({originalEvent:o,valid:de(i),states:de(f),reset:E},s)))}},l)}));return function(l){return u.apply(this,arguments)}})()},T=function(a){return(function(){var u=M(I().m(function l(o){return I().w(function(s){for(;;)switch(s.n){case 0:return E(),s.a(2,a({originalEvent:o}))}},l)}));return function(l){return u.apply(this,arguments)}})()},O=(function(){var w=M(I().m(function a(u){var l,o,s,m,$,c,y,R,h,_,k,S,B,A,Q,Z,z,J,X,Y,L,D,G,U,le,x,H,se,ee;return I().w(function(P){for(;;)switch(P.n){case 0:return $=Object.entries(t).reduce(function(re,$e){var ce=ie($e,2),fe=ce[0],ke=ce[1];return re.names.push(fe),re.values[fe]=ke.value,re},{names:[],values:{}}),c=[$.names,ue($.values)],y=c[0],R=c[1],P.n=1,(o=e.resolver)===null||o===void 0?void 0:o.call(e,{names:y,values:R});case 1:if(le=l=P.v,U=le!==null,!U){P.n=2;break}U=l!==void 0;case 2:if(!U){P.n=3;break}x=l,P.n=4;break;case 3:x={values:R};case 4:h=x,(m=(s=h).errors)!==null&&m!==void 0||(s.errors={}),_=[u].flat(),k=0,S=Object.entries(n);case 5:if(!(k<S.length)){P.n=12;break}if(B=ie(S[k],2),A=B[0],Q=B[1],!(_.includes(A)||!u||Te(h.errors))){P.n=11;break}if(X=(Z=Q.options)===null||Z===void 0?void 0:Z.resolver,!X){P.n=10;break}return L=Q.states.value,P.n=6,X({values:L,value:L,name:A});case 6:if(se=Y=P.v,H=se!==null,!H){P.n=7;break}H=Y!==void 0;case 7:if(!H){P.n=8;break}ee=Y,P.n=9;break;case 8:ee={values:L};case 9:D=ee,ne(D.errors)&&(D.errors=Pe({},A,D.errors)),h=Ie(h,D);case 10:G=(z=ge(h.errors,A))!==null&&z!==void 0?z:[],t[A].invalid=G.length>0,t[A].valid=!t[A].invalid,t[A].errors=G,t[A].error=(J=G?.[0])!==null&&J!==void 0?J:null;case 11:k++,P.n=5;break;case 12:return P.a(2,ae(ae({},h),{},{errors:ue(h.errors)}))}},a)}));return function(u){return w.apply(this,arguments)}})(),E=function(){Object.keys(t).forEach((function(){var a=M(I().m(function u(l){var o,s;return I().w(function(m){for(;;)switch(m.n){case 0:return s=n[l]._watcher,s.pause(),n[l].states=t[l]=v(l,(o=n[l])===null||o===void 0||(o=o.options)===null||o===void 0?void 0:o.initialValue),m.n=1,je();case 1:s.resume();case 2:return m.a(2)}},u)}));return function(u){return a.apply(this,arguments)}})())},V=function(a,u){t[a]!==void 0&&(t[a].value=u)},W=function(a){var u;return(u=n[a])===null||u===void 0?void 0:u.states},q=function(a){Object.keys(a).forEach(function(u){return V(u,a[u])})},K=function(){d("validateOnMount")};return We(K),{defineField:g,setFieldValue:V,getFieldState:W,handleSubmit:j,handleReset:T,validate:O,setValues:q,reset:E,valid:i,states:f,fields:n}},Ze={root:"p-form p-component"},ze=Ee.extend({name:"form",classes:Ze}),Je={name:"BaseForm",extends:Be,style:ze,props:{resolver:{type:Function,default:null},initialValues:{type:Object,default:null},validateOnValueUpdate:{type:[Boolean,Array],default:!0},validateOnBlur:{type:[Boolean,Array],default:!1},validateOnMount:{type:[Boolean,Array],default:!1},validateOnSubmit:{type:[Boolean,Array],default:!0}},provide:function(){return{$pcForm:this,$parentInstance:this}}};function N(r){"@babel/helpers - typeof";return N=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N(r)}function Oe(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Xe(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Oe(Object(t),!0).forEach(function(n){Ye(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Oe(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Ye(r,e,t){return(e=xe(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function xe(r){var e=er(r,"string");return N(e)=="symbol"?e:e+""}function er(r,e){if(N(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(N(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function rr(r,e){return ur(r)||ar(r,e)||nr(r,e)||tr()}function tr(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nr(r,e){if(r){if(typeof r=="string")return we(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?we(r,e):void 0}}function we(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function ar(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n,i,f,v,p=[],d=!0,b=!1;try{if(f=(t=t.call(r)).next,e!==0)for(;!(d=(n=f.call(t)).done)&&(p.push(n.value),p.length!==e);d=!0);}catch(g){b=!0,i=g}finally{try{if(!d&&t.return!=null&&(v=t.return(),Object(v)!==v))return}finally{if(b)throw i}}return p}}function ur(r){if(Array.isArray(r))return r}var or={name:"Form",extends:Je,inheritAttrs:!1,emits:["submit","reset"],setup:function(e,t){var n=t.emit,i=Se(null),f=Qe(e),v=function(){var j;(j=i.value)===null||j===void 0||j.requestSubmit()},p=function(j,T){if(!(T!=null&&T.novalidate)){var O=f.defineField(j,T),E=rr(O,2),V=E[1];return V}return{}},d=f.handleSubmit(function(g){n("submit",g)}),b=f.handleReset(function(g){n("reset",g)});return Xe({formRef:i,submit:v,register:p,onSubmit:d,onReset:b},Ve(f,["handleSubmit","handleReset"]))}};function ir(r,e,t,n,i,f){return De(),Ge("form",oe({ref:"formRef",onSubmit:e[0]||(e[0]=pe(function(){return n.onSubmit&&n.onSubmit.apply(n,arguments)},["prevent"])),onReset:e[1]||(e[1]=pe(function(){return n.onReset&&n.onReset.apply(n,arguments)},["prevent"])),class:r.cx("root")},r.ptmi("root")),[Me(r.$slots,"default",oe({register:n.register,valid:r.valid,reset:r.reset},r.states))],16)}or.render=ir;export{or as default};
