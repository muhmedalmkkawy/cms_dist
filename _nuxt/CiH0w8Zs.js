import{aA as E,f as M,aB as A,N as L,aC as R,aD as _,l as y,aE as D,aF as I}from"./DUA4fd_v.js";function W(){const s=E(),{t:e}=M(),t=(a,u,l,d=1e3)=>{s.add({severity:a,summary:u,detail:l,life:d})};return{toast:s,showErrorToast:a=>{t("error",e("toast.error"),a)},showSuccessToast:a=>{t("success",e("toast.success"),a)},showInfoToast:a=>{t("info",e("toast.info"),a)},showWarnToast:a=>{t("warn",e("toast.warn"),a)}}}const k=(s,e={})=>{const t=A()?.userData?.token||JSON.parse(window.sessionStorage.getItem("authStore"))?.token,n=L().lang,r=R(),w=e.baseURL||r.public.apiBase,g=r.public.secretKey,a={...s?{authorization:`Bearer ${t}`}:{},"accept-language":n||"en",secretKey:g,...e.headers};return{baseURL:w,headers:a,response_type:"json",...e}},$=async(s,e,t={},n)=>{try{return{data:await $fetch(s,{...k(e,t),method:n,body:t.body||void 0}),error:null}}catch(r){return console.error(`Error fetching data from ${s}:`,r),{data:null,error:r}}},v=(s,e,t={})=>$(s,e,t,"GET"),U=(s,e,t,n="POST",r={})=>$(s,e,{...r,body:t},n);function C(){const s=L(),e=A(),t=D(),n=_(),{showErrorToast:r,showSuccessToast:w,showInfoToast:g,showWarnToast:a}=W(),u=async o=>{setTimeout(()=>{o=="reload_page"?t.go(0):o=="unAuthed"?(I("authStore").value=null,t.push(n("/login"))):t.push(n(o))},500)},l=(o,c)=>{s.switchLoading(!1),o=="success"?w(c):o=="info"?g(c):o=="warn"?a(c):r(c)},d=y(null),S=async(o,c,T,p)=>{s.switchLoading(!0),d.value=null;const{data:i,error:h}=await v(`${o}${c?`${o.includes("?")?"&":"?"}page=${c}`:""}`,T);h?(l("error",h?.response?._data?.message),h?.response?._data?.error==="Unauthorized"&&u("unAuthed")):(i.status=="success"&&(d.value=i),s.switchLoading(!1),p&&l(i?.status,i?.message))},m=y(null);return{getMethod:S,getResult:d,submitMethod:async(o,c,T,p,i,h)=>{s.switchLoading(!0);const{data:f,error:b}=await U(o,c,T,p);b?(l("error",b?.response?._data?.message),b?.response?._data?.error==="Unauthorized"&&u("unAuthed")):(o.endsWith("logout")&&u("unAuthed"),i&&u(i),h&&S(h,"",!!e,!1),o.endsWith("login")&&f&&e?.handleUserData(f?.data),m.value=f,l(f?.status,f?.message),s.switchLoading(!1))},submitResult:m,showErrorToast:r,handleNextRoute:u}}export{W as a,C as u};
